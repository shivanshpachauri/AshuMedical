import{a as p,b as y,r as n,c as b,j as e,L as g,E as w,N as j,d as N,e as S,f as k,O as C,B as f,S as L,g as E}from"./index-gc5Gmuxv.js";import{a as A}from"./aiformatter-De3zzSDj.js";async function M(a){try{const{title:i,body:r}=a,t=await p.post("/api/ai/save",{title:i,body:r})}catch(i){console.trace(i)}}async function O(){try{return(await p.get("/api/ai/view")).data}catch(a){console.trace(a)}}function B(){return y({queryKey:["fetchai"],queryFn:O,staleTime:3e3,cacheTime:3e3})}function R(){const{data:a=[],isLoading:i,isError:r}=B(),[t,c]=n.useState(""),[l,d]=n.useState(!1),u=b(),h=n.useMemo(()=>a.filter(s=>JSON.stringify(s).toLowerCase().includes(t.toLowerCase())),[a,t]);function m(s){u(N.setaislice({id:s.id,title:s.title,body:s.body}))}return i?e.jsx(g,{title:"Loading Sidebar"}):r?e.jsx(w,{title:"Error in fetchai sidebar"}):e.jsx("nav",{className:"rounded col-md-2 d-none d-md-block bg-dark sidebar",style:{marginLeft:"0.57rem"},children:e.jsxs("div",{className:"nav flex-column",children:[e.jsx("h3",{className:"mx-auto text-light",children:"Save"}),e.jsx("input",{className:"mx-auto",name:"search",id:"aisearch",type:"search",value:t,onChange:s=>c(s.target.value),style:{width:"10em",padding:0}}),e.jsx("div",{className:"sidebarlist",style:{height:"500px",overflow:"auto"},children:h.toReversed().map((s,x)=>e.jsxs(j,{onMouseOver:()=>{d(!0)},to:`/ai/${s.id}`,style:{maxWidth:"150px"},className:"sidebarrow d-block text-truncate text-decoration-none  position-relative m-2",onClick:()=>m(s),children:[s.title,l&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"})})]},x))})]})})}function Q(){const[a,i]=n.useState(""),[r,t]=n.useState(""),[c,l]=n.useState(),d=S(),u=k();async function h(){await M({title:a,body:r}),L.fire("submitted successfully"),u.invalidateQueries(["fetchai"])}const m=async()=>{try{l(e.jsx(g,{className:"d-flex flex-row",title:"Loading answer"}));const v=(await E.post("http://localhost:3000/api/chat",{message:a})).data.botReply,o=A(v);o?typeof o=="string"?t(o):Array.isArray(o)?t(o.join(" ")):typeof o=="object"&&t(JSON.stringify(o,null,2)):t("No response received from bot."),l(null)}catch(s){console.error("Error sending message:",s),t(`Error sending message: ${s.message}`),l(null)}};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx(R,{}),e.jsxs("main",{className:"col",children:[e.jsx(C,{}),d.pathname=="/ai"&&e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[e.jsx("h1",{children:"AI "}),e.jsxs("div",{className:"airesponse d-flex flex-column rounded shadow-lg",style:{marginTop:"10px",backgroundColor:"lightblue",width:"600px",height:"500px",whiteSpace:"normal",overflowY:"auto"},children:[c,e.jsx("div",{className:"airesponse",style:{fontSize:"90%",overflowX:"hidden",margin:"10px",padding:"10px",overflowWrap:"break-word",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:r}})]}),e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx("textarea",{id:"searchval",name:"aisearchinput",className:"rounded shadow-lg m-2 p-2",value:a,style:{width:"500px",border:"none",borderBottom:"1px solid black"},onChange:s=>i(s.target.value)}),e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(f,{className:"m-2 p-2",onClick:m,children:"Submit"}),e.jsxs(f,{className:"m-2 p-2 border-0",style:{backgroundColor:"darkblue"},onClick:h,children:[" ","Save"]})]})]})]})]})]})})}export{Q as default};
