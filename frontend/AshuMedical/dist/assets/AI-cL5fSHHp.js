import{a as p,b as v,r as n,c as b,j as e,L as y,E as w,N as j,d as N,e as S,f as k,O as C,B as g,S as L}from"./index-ixY1YaKu.js";import{a as E}from"./aiformatter-BMR4e1Dp.js";async function A(a){try{const{title:i,body:l}=a,t=await p.post("http://localhost:3000/api/ai/save",{title:i,body:l})}catch(i){console.trace(i)}}async function M(){try{return(await p.get("http://localhost:3000/api/ai/view")).data}catch(a){console.trace(a)}}function O(){return v({queryKey:["fetchai"],queryFn:M,staleTime:3e3,cacheTime:3e3})}function B(){const{data:a=[],isLoading:i,isError:l}=O(),[t,u]=n.useState(""),[c,d]=n.useState(),[h,m]=n.useState(!1),x=b();n.useEffect(()=>{d(a.filter(s=>JSON.stringify(s).toLowerCase().includes(t.toLowerCase())))},[t,a,d]);function o(s){x(N.setaislice({id:s.id,title:s.title,body:s.body}))}return i?e.jsx(y,{title:"Loading Sidebar"}):l?e.jsx(w,{title:"Error in fetchai sidebar"}):e.jsx("nav",{className:"rounded col-md-2 d-none d-md-block bg-dark sidebar",style:{marginLeft:"0.57rem"},children:e.jsxs("div",{className:"nav flex-column",children:[e.jsx("h3",{className:"mx-auto text-light",children:"Save"}),e.jsx("input",{className:"mx-auto",type:"search",value:t,onChange:s=>u(s.target.value),style:{width:"10em",padding:0}}),e.jsx("div",{className:"sidebarlist",style:{height:"500px",overflow:"auto"},children:c.toReversed().map((s,f)=>e.jsxs(j,{onMouseOver:()=>{m(!0)},to:`/ai/${s.id}`,style:{maxWidth:"150px"},className:"sidebarrow d-block text-truncate text-decoration-none  position-relative m-2",onClick:()=>o(s),children:[s.title,h&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"})})]},f))})]})})}function F(){const[a,i]=n.useState(""),[l,t]=n.useState(""),[u,c]=n.useState(),d=S(),h=k();async function m(){await A({title:a,body:l}),L.fire("submitted successfully"),h.invalidateQueries(["fetchai"])}const x=async()=>{try{c(e.jsx(y,{className:"d-flex flex-row",title:"Loading answer"}));const f=(await p.post("http://localhost:3000/api/chat",{message:a})).data.botReply,r=E(f);r?typeof r=="string"?t(r):Array.isArray(r)?t(r.join(" ")):typeof r=="object"&&t(JSON.stringify(r,null,2)):t("No response received from bot."),c(null)}catch(o){console.error("Error sending message:",o),t(`Error sending message: ${o.message}`),c(null)}};return e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx(B,{}),e.jsxs("main",{className:"col",children:[e.jsx(C,{}),d.pathname=="/ai"&&e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[e.jsx("h1",{children:"AI "}),e.jsxs("div",{className:"airesponse d-flex flex-column rounded shadow-lg",style:{marginTop:"10px",backgroundColor:"lightblue",width:"600px",height:"500px",whiteSpace:"normal",overflowY:"auto"},children:[u,e.jsx("div",{className:"airesponse",style:{fontSize:"90%",overflowX:"hidden",margin:"10px",padding:"10px",overflowWrap:"break-word",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:l}})]}),e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx("textarea",{className:"rounded shadow-lg m-2 p-2",value:a,style:{width:"500px",border:"none",borderBottom:"1px solid black"},onChange:o=>i(o.target.value)}),e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(g,{className:"m-2 p-2",onClick:x,children:"Submit"}),e.jsxs(g,{className:"m-2 p-2 border-0",style:{backgroundColor:"skyblue"},onClick:m,children:[" ","Save"]})]})]})]})]})]})})}export{F as default};
